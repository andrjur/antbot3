
–Ø –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∏–ª –ª–æ–≥–∏ –∏ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã. –°–∞–º –ò–ò –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω–æ (–≤—ã–¥–∞–ª is_approved: false –∏ –Ω–∞–ø–∏—Å–∞–ª –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π —Ç–µ–∫—Å—Ç).
–ü—Ä–æ–±–ª–µ–º–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –Ω–∞ —Å–∞–º–æ–º –ø–æ—Å–ª–µ–¥–Ω–µ–º —à–∞–≥–µ ‚Äî –≤ —É–∑–ª–µ HTTP Request (–∫—Ä–∞—Å–Ω—ã–π —É–∑–µ–ª –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç–µ). –¢–∞–º –∫—Ä–æ—é—Ç—Å—è –¥–≤–µ –æ—à–∏–±–∫–∏, –∏–∑-–∑–∞ –∫–æ—Ç–æ—Ä—ã—Ö –±–æ—Ç –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ—Ç n8n, –∏ –ø–æ—ç—Ç–æ–º—É –î–ó –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç "–≤–∏—Å–µ—Ç—å" –≤ –æ–∂–∏–¥–∞–Ω–∏–∏, –∞ —Ç–∞–π–º–µ—Ä —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞.
–í–æ—Ç –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —É–∑–µ–ª HTTP Request, —á—Ç–æ–±—ã –≤—Å—ë —Å—Ç–∞–ª–æ –∑–µ–ª—ë–Ω—ã–º:
–û—à–∏–±–∫–∞ 1: 404 Not Found (–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL)
–í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ, —á—Ç–æ Python-–±–æ—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç URL http://bot:8080/n8n_hw_result. –ù–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ–¥–∞ –±–æ—Ç–∞ —ç—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º /webhook/ (–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ .env). –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ n8n —Å—Ç—É—á–∏—Ç—Å—è "–Ω–µ –≤ —Ç—É –¥–≤–µ—Ä—å" –∏ –ø–æ–ª—É—á–∞–µ—Ç 404.
–†–µ—à–µ–Ω–∏–µ:
–í —Å–∞–º–æ–º –ø–æ—Å–ª–µ–¥–Ω–µ–º —É–∑–ª–µ HTTP Request:
–ù–∞–π–¥–∏ –ø–æ–ª–µ URL.
–£–¥–∞–ª–∏ –æ—Ç—Ç—É–¥–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é {{ $('Edit Fields')... }}.
–í–ø–∏—à–∏ —Ç—É–¥–∞ –ø—É—Ç—å –∂—ë—Å—Ç–∫–æ –≤—Ä—É—á–Ω—É—é:
code
Text
http://bot:8080/webhook/n8n_hw_result
–û—à–∏–±–∫–∞ 2: –ü—É—Å—Ç–æ–π ID —Å–æ–æ–±—â–µ–Ω–∏—è (undefined)
–ù–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç–µ (–≥–¥–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ HTTP Request) –≤–∏–¥–Ω–æ, —á—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä original_admin_message_id —Ä–∞–≤–µ–Ω undefined.
–≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–æ —Ç–∞–π–º–∞—É—Ç—É –±–æ—Ç –ø–µ—Ä–µ–¥–∞–µ—Ç –ø–æ–ª–µ –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º admin_message_id, –∞ –Ω–µ original_admin_message_id. –ï—Å–ª–∏ –±–æ—Ç –ø–æ–ª—É—á–∏—Ç undefined, –æ–Ω –Ω–µ –ø–æ–π–º–µ—Ç, –∫–∞–∫–æ–µ –î–ó –Ω—É–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å.
–†–µ—à–µ–Ω–∏–µ:
–¢–∞–º –∂–µ –≤ —É–∑–ª–µ HTTP Request, –≤ –±–ª–æ–∫–µ Send Body (–ü–∞—Ä–∞–º–µ—Ç—Ä—ã):
–ù–∞–π–¥–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä original_admin_message_id.
–ó–∞–º–µ–Ω–∏ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ (Value) –Ω–∞ —ç—Ç—É —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é —Ñ–æ—Ä–º—É–ª—É (—Å–∫–æ–ø–∏—Ä—É–π –∏ –≤—Å—Ç–∞–≤—å):
code
JavaScript
{{ $('Webhook-homework').item.json.body.original_admin_message_id || $('Webhook-homework').item.json.body.admin_message_id }}
(–≠—Ç–∞ —Ñ–æ—Ä–º—É–ª–∞ –≥–æ–≤–æ—Ä–∏—Ç n8n: –≤–æ–∑—å–º–∏ original_..., –∞ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç, –≤–æ–∑—å–º–∏ –æ–±—ã—á–Ω—ã–π admin_...).
–ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (Headers)
–£–±–µ–¥–∏—Å—å, —á—Ç–æ –±–æ—Ç –ø—É—Å—Ç–∏—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å.
–í —ç—Ç–æ–º –∂–µ —É–∑–ª–µ HTTP Request –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω –±–ª–æ–∫ Send Headers.
–ù–∞–∂–º–∏ Add Header.
Name: X-CALLBACK-SIGNATURE
Value: 500 (—ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Ç–≤–æ–µ–≥–æ —Ñ–∞–π–ª–∞ .env, –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è N8N_CALLBACK_SECRET).
üßπ –ë–æ–Ω—É—Å: –ö–∞–∫ —É–±—Ä–∞—Ç—å –∂–µ–ª—Ç–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ —É–∑–ª–µ Code
–ù–∞ 4-–º —Å–∫—Ä–∏–Ω—à–æ—Ç–µ –≤–∏–¥–Ω–æ, —á—Ç–æ —É–∑–µ–ª Code —Ä—É–≥–∞–µ—Ç—Å—è (–∂–µ–ª—Ç—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ Property 'item' does not exist). –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ IDE —Ä—É–≥–∞–µ—Ç—Å—è –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å.
–ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –∫—Ä–∞—Å–∏–≤–æ:
–û—Ç–∫—Ä–æ–π —É–∑–µ–ª Code.
–°–≤–µ—Ä—Ö—É –ø–µ—Ä–µ–∫–ª—é—á–∏ Mode —Å Run Once for All Items –Ω–∞ Run Once for Each Item.
–ö–æ–¥ –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫ (n8n —Å–∞–º –ø–æ–¥—Å—Ç–∞–≤–∏—Ç $input.item):
code
JavaScript
const rawOutput = $input.item.json.output;
// –¥–∞–ª—å—à–µ —Ç–≤–æ–π –∫–æ–¥ –ø–æ–∏—Å–∫–∞ JSON, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ
–ò—Ç–æ–≥: —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø–æ—Å–ª–µ —ç—Ç–∏—Ö –ø—Ä–∞–≤–æ–∫
n8n –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –∞–¥—Ä–µ—Å—É (/webhook/n8n_hw_result).
–ë–æ—Ç –ø–æ–ª—É—á–∏—Ç —Ç–æ—á–Ω—ã–π ID —Å–æ–æ–±—â–µ–Ω–∏—è (864), –Ω–∞–π–¥–µ—Ç –µ–≥–æ –≤ –±–∞–∑–µ.
–ë–æ—Ç –Ω–∞–ø–∏—à–µ—Ç —Ç–µ–±–µ –≤ –¢–µ–ª–µ–≥—Ä–∞–º: "‚ùå –í–∞—à–µ –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ... –ü—Ä–∏—á–∏–Ω–∞: 777 —ç—Ç–æ —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ...".
–ë–æ—Ç —É–¥–∞–ª–∏—Ç –î–ó –∏–∑ —Å–ø–∏—Å–∫–∞ –æ–∂–∏–¥–∞–Ω–∏—è, –∏ —Ç–∞–π–º–µ—Ä –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –∫—Ä—É—Ç–∏—Ç—å—Å—è –ø–æ –∫—Ä—É–≥—É.