#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∫ main.py

echo "üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∫ main.py..."

# 1. –£–±–∏—Ä–∞–µ–º –∫–Ω–æ–ø–∫–∏ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
sed -i 's/if message_id_to_process:/if message_id_to_process:\n                    # –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º —É–±—Ä–∞—Ç—å –∫–Ω–æ–ø–∫–∏ (–µ—Å–ª–∏ —Ç–∞–π–º–µ—Ä –µ—â—ë –Ω–µ —É–±—Ä–∞–ª)\n                    try:\n                        await bot.edit_message_reply_markup(\n                            chat_id=ADMIN_GROUP_ID,\n                            message_id=message_id_to_process,\n                            reply_markup=None\n                        )\n                        logger.info(f"{log_prefix} –ö–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω—ã")\n                    except Exception as e_rm:\n                        logger.debug(f"{log_prefix} –ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –∫–Ω–æ–ø–∫–∏: {e_rm}")\n\n                    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –û–¢–î–ï–õ–¨–ù–û–ï —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º (reply –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É –î–ó)\n                    try:\n                        await bot.send_message(\n                            chat_id=ADMIN_GROUP_ID,\n                            text=final_admin_notification,\n                            reply_to_message_id=message_id_to_process,\n                            parse_mode=None\n                        )\n                        logger.info(f"{log_prefix} –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –∞–¥–º–∏–Ω-—á–∞—Ç")\n                    except Exception as e_admin_notify:\n                        logger.error(f"{log_prefix} –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: {e_admin_notify}")\n                else:\n                    # –ï—Å–ª–∏ –Ω–µ—Ç message_id, –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ\n                    try:\n                        await bot.send_message(\n                            chat_id=ADMIN_GROUP_ID,\n                            text=final_admin_notification,\n                            parse_mode=None\n                        )\n                        logger.info(f"{log_prefix} –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω (–±–µ–∑ reply)")\n                    except Exception as e_admin_notify:\n                        logger.error(f"{log_prefix} –û—à–∏–±–∫–∞: {e_admin_notify}")\n                # –ó–ê–ö–û–ú–ú–ï–ù–¢–ò–†–û–í–ê–ù–û –°–¢–ê–†–û–ï:/g' main.py

echo "‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã!"
